
\pgfplotstableread{
{Data Size}     {NIO} {Shared Memory}
0	2.576841336	2.147706722
1	5.545228326	4.272021174
1.5849625007	7.726957319	7.941745044
2	10.013083969	10.801283438
2.5849625007	16.723873458	16.197979534
3	20.150698426	22.063885688
3.5849625007	33.574633534	32.442950029
3.7004397181	33.448067	35.139416374
4	43.765149335	43.670951478
4.2479275134	52.793218925	51.261994846
4.3923174228	57.488238424	57.850554268
4.5849625007	67.99961166	66.161991935
4.7548875022	76.763633369	73.664018852
4.8579809951	83.013355818	77.463310418
5	84.290323049	88.132570727
5.1292830169	92.075074111	95.803822135
5.4918530963	114.259304918	124.232851462
5.5849625007	128.290549072	131.869268778
5.672425342	141.408038408	137.934000764
5.9307373376	166.971251152	164.232619826
6	168.924585375	171.574512126
6.0660891905	172.627284749	182.455669312
6.5391588111	242.28639045	253.548355375
6.5849625007	247.831771921	262.915442567
6.6293566201	273.762222745	268.634305905
6.9657842847	350.58561552	339.491228681
7	334.296610716	348.312813894
7.0334230015	362.819936119	354.545087245
7.5622424242	486.841278956	502.322902315
7.5849625007	499.707746832	520.842912383
7.6073303137	499.727677792	526.545698382
7.9829935747	710.551654037	696.133292633
8	689.974175612	692.167270586
8.0168082877	658.860353742	698.55946383
8.5736471875	1077.865514949	1032.676482912
8.5849625007	965.417280817	1035.294716704
8.5961897561	1009.770109207	1048.000840279
8.9915218461	1375.971463387	1383.226081798
9	1301.443108716	1395.07002088
9.0084286221	1266.080197795	1372.606803231
9.5793159376	2046.864333382	2046.199698642
9.5849625007	2086.77204194	2062.513790009
9.5905870499	2095.5218633	2049.524092976
9.9957671509	2723.928327772	2744.466999567
10	2753.408470447	2768.117327409
10.0042204663	2615.146099904	2779.311033691
10.5821419817	3669.832560439	4006.910050725
10.5849625007	3829.558156695	4034.980246518
10.5877775163	4189.01139659	3997.777246149
10.9978851278	5754.230979377	5378.63017865
11	5461.478653755	5334.021394026
11.0021117765	4905.637497392	5338.400733487
11.5835529305	7344.327104739	7750.959722433
11.5849625007	7235.882727769	7719.715645063
11.5863706951	7682.983267947	7818.233985278
11.9989429514	9551.551302606	9887.723715278
12	9521.206540611	10089.389131853
12.0010562746	9927.479018505	10025.167746036
12.5842578877	14179.775736231	14008.202598446
12.5849625007	14637.099796236	14009.946041902
12.5856667697	14233.690871986	13993.970358688
12.9994715725	17324.270964988	18030.523630503
13	18538.080469586	18027.265391125
13.000528234	18472.12926833	17602.67514208
13.5846102372	24219.440166044	24515.519742455
13.5849625007	23511.586420593	24652.686967991
13.5853146782	24350.252418957	24173.519813885
13.9997358105	28346.628242363	30282.529758015
14	28267.392088182	30250.72649298
14.0002641412	30423.630268637	30525.994430172
14.5847863797	34246.003635951	40766.406197553
14.5849625007	37055.954263612	40813.796346105
14.5851386002	35207.459882859	40739.830187523
14.9998679113	40149.519597008	48807.620811055
15	41940.259719104	48740.738280992
15.0001320766	40904.721809102	48101.277515708
15.5848744429	51311.178725583	57683.834602825
15.5849625007	49769.344120515	57453.213623664
15.5850505532	50544.679586478	58481.179110057
15.9999339572	46344.298567209	66367.998059794
16	46296.216919974	65854.712042478
16.0000660398	50756.013423866	64496.508366148
16.5849184725	52153.669715675	72643.146057705
16.5849625007	53955.050189283	72780.370764797
16.5850065276	52779.008890281	72153.764369841
16.999966979	54388.065201778	75939.500490533
17	53388.986793476	75083.39852077
17.0000330203	52241.153582614	74536.417724328
17.5849404868	52023.51343514	70472.924967947
17.5849625007	49753.781233227	70629.365450787
17.5849845143	50869.877745273	69160.798581023
17.9999834896	48604.027716166	64254.38506281
18	48734.060645841	63046.49512657
18.0000165102	49573.001802243	64368.455013901
18.5849514938	44732.403323713	51005.019198241
18.5849625007	47488.095487489	50803.915149665
18.5849735076	46480.9457714	51083.894268478
18.9999917448	45781.324510333	37289.217748347
19	42147.416805923	37573.529331962
19.0000082551	43222.955327377	37080.244252071
19.5849569973	39818.288165212	37181.019019603
19.5849625007	39871.41360753	37040.126705168
19.5849680042	39134.58339614	37438.534565207
19.9999958724	37686.395601968	35500.54862625
20	38191.179888083	35522.079999255
20.0000041276	38338.993828423	35870.212765039
20.584959749	33310.745067307	34536.688680155
20.5849625007	32604.517401701	35553.452478509
20.5849652524	33079.603967111	35143.511923574
20.9999979362	30981.844613317	35255.092459315
21	32021.222198824	34729.970251745
21.0000020638	31632.75542933	35166.143597986
21.5849611249	31414.976201112	34682.325438463
21.5849625007	30811.747799221	34401.50278185
21.5849638766	30261.515932384	35287.117704066
21.9999989681	29264.963140034	34611.785784014
22	29619.626639383	35632.753668996
22.0000010319	29513.665970393	35187.831636054
22.5849618128	30546.436037257	35240.279083834
22.5849625007	30246.046040466	35274.96152734
22.5849631887	30460.905749035	34343.26101381
22.9999994841	30117.413191471	33064.180154429
23	30380.650434996	34350.611830909
23.0000005159	30023.139058984	34387.711730555
23.5849621568	29550.42582798	34460.834070101
23.5849625007	29671.507272836	32922.17460645
23.5849628447	30157.908373603	34470.089625452
23.999999742	29235.688475044	33968.368582461
24	21110.082804457	33426.291268
24.000000258	27539.312911451	34071.714737626
24.5849623287	28515.075762843	34081.388795021
24.5849625007	29209.146228985	33963.694061978
24.5849626727	28860.596758574	34353.630274577
24.999999871	28328.619861205	34667.687366721
25	28838.586295543	34525.19528628
25.000000129	23427.415271058	34454.417801855
25.5849624147	24507.425749632	34821.942564342
25.5849625007	28693.066755674	34917.750426166
25.5849625867	28781.168412129	35070.192244739
25.9999999355	27407.309864491	34948.815506843
26	28526.625109203	34946.866408054
26.0000000645	28720.432662219	34784.993131456
}\datatable

%\newcommand\test[1]{
%\pgfmathsetmacro{\var}{#1}
%\pgfmathparse{\varDelta*2} \pgfmathresult}

\begin{tikzpicture}
    \begin{axis}[
    every axis legend/.append style={nodes={right}},
    width= 1\columnwidth,
    height=4cm,
    xlabel={Message Size (bytes)},
    ylabel={Gbps},
    %y label style={pos=east},
    y label style={at={(0.1, 0.5)}},
    x label style={at={(0.5, 0.08)}},
    legend pos=north west,
    legend style={anchor=north west,font=\tiny},
    %symbolic x coords={1,4,16,64,256,1Kb,4Kb,16Kb,64Kb,256Kb,1Mb,4Mb,16Mb,64Mb},
    %xtick={0,4,8,12,16,20,24,26},
    %xmode=log,
    %log basis x={2},
    scaled y ticks = false,
    y tick label style={
    	/pgf/number format/1000 sep = \thinspace
    },
    x tick label style={font=\tiny},
        xtick={0,4,8,12,16,20,24},
        xticklabels={
          1,16,256,4\,Kb,64\,Kb,1\,Mb,16\,Mb
        },
    %scaled x ticks=manual:{}{%
    % 	\pgfmathparse{ (#1 < 10) ? pow(2,#1) : ((#1 < 20) ? pow(2, #1 - 10) : pow(2, #1 - 20))}    	
    %},
    %xticklabel={
    %{\pgfmathprintnumber{\tick}}%
    %{\pgfmathparse{\tick==4?"K":""}\pgfmathresult}   
    %},
    %xticklabel={\pgfmathparse{int(pow(2,\tick)) }\pgfmathresult},
    %xticklabel={\pgfmathparse{int(\tick) == 0?
    %	1:(int(\tick)==4?
    %	16:(int(\tick)==8?
    %	256:(int(\tick)==12?
    %	"4K":(int(\tick)==16?
    %	"64K":(int(\tick)==20?
    %	"1M":(int(\tick)==24?"16M":"64M")))))) 
    %	}\pgfmathresult},
    %xtick scale label code/.code={},
    %scaled x ticks=base 10:2,
    scaled y ticks=manual:{}{%
          	\pgfmathparse{#1/1000}%
    },
    yticklabel={\pgfmathprintnumber\tick},
    ]
    	\addplot [mark=+,color=black, mark size=1] table[y={Shared Memory}, x = {Data Size}] {\datatable};
    	\addlegendentry{Shared Memory}[minimum height=1.9in];
    	\addplot [mark=node,color=gray] table[y={NIO}, x ={Data Size}] {\datatable};
    	\addlegendentry{NIO}[minimum height=1.9in];
    \end{axis}
\end{tikzpicture}